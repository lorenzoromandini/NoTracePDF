# NoTracePDF Development Docker Compose Configuration
#
# Development overrides with:
# - Source code mount for hot reload
# - Debug mode enabled
# - Same tmpfs privacy guarantees

services:
  notracepdf:
    build:
      context: .
      dockerfile: Dockerfile
    
    # Mount source code for development
    volumes:
      - ./app:/app/app:ro
    
    environment:
      - APP_NAME=NoTracePDF (Dev)
      - DEBUG=true
      - MAX_FILE_SIZE_MB=100
      - UPLOAD_DIR=/app/uploads
      - REQUEST_TIMEOUT_SECONDS=60
    
    # Override entrypoint for development with reload
    entrypoint: ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "8000", "--reload"]
    
    # Same tmpfs mounts for privacy
    tmpfs:
      - /tmp:noexec,nosuid,size=512m
      - /app/uploads:noexec,nosuid,size=256m
